#+title: Charming CLIM tutorial part 2.5 – Retained display
#+author: Daniel 'jackdaniel' Kochmański
#+email: daniel@turtleware.eu
#+hugo_base_dir: ~/hugo/

The previous issue was quite long, so I've decided to write a separate post
about the retained display. We'll also use this opportunity to refactor the
project and put different abstractions in separate directories:

- level 0 :: raw terminal access
- level 1 :: console and surfaces
- level 2 :: display lists and frame manager

#+BEGIN_SRC lisp
(defsystem "eu.turtleware.charming-clim"
  :defsystem-depends-on (#:cffi)
  :depends-on (#:alexandria #:cffi #:swank)
  :pathname "Sources"
  :components ((:file "packages")
               (:module "l0"
                :depends-on ("packages")
                :components ((:cfile "raw-mode")
                             (:file "terminal" :depends-on ("raw-mode"))))
               (:module "l1"
                :depends-on ("packages" "l0")
                :components ((:file "cursor")
                             (:file "output")
                             (:file "surface" :depends-on ("output"))
                             (:file "console" :depends-on ("cursor" "output"))))
               (:module "l2"
                :depends-on ("packages" "l0" "l1")
                :components ((:file "display-lists")
                             (:file "frame-manager" :depends-on ("display-lists"))))))
#+END_SRC

For now files defined in the module ~l2~ are empty.
